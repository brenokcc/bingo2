api:
  app: true
  lang: pt-br
  title: Sorteio Online
  subtitle: Sistema de Gerenciamento de Cartelas
  icon: /static/images/icon2.png
  logo: /static/images/bingo.svg
  footer:
    logo: /static/images/bingo2.svg
    version: 1.0.1
  theme:
    primary: 1351b4
    secondary: 071e41
    auxiliary: 2670e8
    highlight: 0c326f
    info: d4e5ff
    success: 1351b4
    warning: fff5c2
    danger: e52207
    radius: 5px
  index: bingo.actions.index
  dashboard: bingo.actions.dashboard
  groups:
    adm: Administrador
    op: Operador
  models:
    auth.user:
      prefix: users
      search: username
      filters: date_joined__gte, is_superuser, username
      ordering: username
      actions: list, add, view, edit, delete, api.actions.changepassword, api.actions.changepasswords, api.actions.verifypassword
      fieldsets:
        dados_gerais: username, first_name, last_name, get_full_name
        dados_acesso: date_joined, is_staff, is_active
        contato: email
      relations:
        api.actions.userroles:
          fields: id, name, scope, model, value, active
          actions: view
      endpoints:
        add:
          fields: first_name, last_name, username
        list:
          fields: id, username, email, api.actions.userroles
          actions: add, view, edit, delete, api.actions.changepassword, api.actions.changepasswords
          extends:
            active:
              fields: id, username
            inactive:
        view:
          fields: id, dados_gerais, dados_acesso, api.actions.userroles
          actions: api.actions.verifypassword, api.actions.changepassword
    api.role:
      prefix: roles
      endpoints:
        list:
          fields: id, name
          actions: view, edit
    bingo.meiopagamento:
      requires:
        adm:
    bingo.administrador:
      roles:
        adm:
          username: pessoa__cpf
          email: pessoa__email
      requires:
        adm:
    bingo.pessoa:
      requires:
        adm:
        op:
      fieldsets:
        dados_gerais: nome, cpf, telefone, observacao
      relations:
        get_cartelas:
          search: numero
          filters: talao__evento, talao
          subsets: pendentes_distribuicao, pendentes_pagamento, pagas
          fields: numero, talao, responsavel, posse, realizou_pagamento, meio_pagamento, comissao, get_situacao
          actions: bingo.actions.prestarconta
      endpoints:
        view: dados_gerais, get_cartelas
    bingo.evento:
      roles:
        op:
          username: operadores__cpf
          email: operadores__email
      fieldsets:
        dados_gerais: nome, data
        configuracao: qtd_cartela_talao, qtd_taloes, valor_venda_cartela, valor_comissao_cartela
        resumo_financeiro: get_total_cartelas_distribuidas, get_receita_esperada, get_valor_recebido_venda, get_valor_recebido_doacao, get_valor_receber, get_valor_perdido, get_receita_final
      relations:
        get_cartelas:
          search: numero
          aggregations: get_valor_pago, get_valor_pendente_pagamento, get_valor_nao_pago
          filters: talao, responsavel, posse
          subsets: pendentes_distribuicao, pendentes_pagamento, pagas
          fields: numero, talao, responsavel, posse, realizou_pagamento, meio_pagamento, comissao, get_situacao
          actions: bingo.actions.distribuir, bingo.actions.informarpossecartela, bingo.actions.devolvercartela, bingo.actions.prestarconta
      endpoints:
        list:
          requires:
            adm:
            op: operadores__cpf
          calendar: data
          fields: nome, data, operadores
        view:
          requires:
            adm:
            op: operadores__cpf
          fields: dados_gerais, configuracao, get_percentual_cartela_distribuida, get_percentual_cartela_paga, get_cartelas, resumo_financeiro
        add:
          requires:
            adm:
          fieldsets:
            dados_gerais: nome, data
            detalhamento: qtd_taloes, qtd_cartela_talao, valor_venda_cartela, valor_comissao_cartela
            gerenciamento: operadores
        edit:
          requires:
            adm:
          fields: nome, data, operadores
        delete:
          requires:
            adm:
    bingo.cartela:
      actions: bingo.actions.distribuir, bingo.actions.informarpossecartela, bingo.actions.devolvercartela, bingo.actions.prestarconta
    bingo.compraonline:
      icon: cart-plus
      fieldsets:
        dados_gerais: cpf, nome, telefone, email, data_hora, valor, uuid, get_status
      endpoints:
        list:
          requires:
            adm:
            op:
          fields: cpf, nome, telefone, email, data_hora, valor, get_status, get_numeros_cartelas
          actions: view, bingo.actions.atualizarsituacao, bingo.actions.efetuarpagamentoonline
        add:
          requires:
            adm:
          fields: cpf, nome, telefone, email, numero_cartelas
        view:
          requires:
            adm:
            op:
          fields: dados_gerais, get_link_pagamento, get_cartelas

